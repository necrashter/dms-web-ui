
fallbackGraph = {
    "nodes": [
        {
            "latlng": [
                40.9856,
                29.0262
            ]
        },
        {
            "latlng": [
                40.994,
                29.0334
            ]
        },
        {
            "latlng": [
                41.005,
                29.0221
            ]
        },
        {
            "latlng": [
                41.0118,
                29.0445
            ]
        },
        {
            "latlng": [
                40.9845,
                29.0491
            ]
        },
        {
            "latlng": [
                40.9763,
                29.0503
            ]
        },
        {
            "latlng": [
                40.9983,
                29.0451
            ]
        },
        {
            "latlng": [
                41.0009,
                29.0595
            ]
        },
        {
            "latlng": [
                41.0094,
                29.0637
            ]
        },
        {
            "latlng": [
                40.9947,
                29.0715
            ]
        },
        {
            "latlng": [
                40.98456328825827,
                29.062871932983402
            ]
        },
        {
            "latlng": [
                40.98948732769741,
                29.094972610473636
            ]
        },
        {
            "latlng": [
                40.996289671996706,
                29.100465774536136
            ]
        },
        {
            "latlng": [
                40.99564185992136,
                29.086475372314453
            ]
        },
        {
            "latlng": [
                41.00231401938748,
                29.081239700317383
            ]
        },
        {
            "latlng": [
                41.00302654019055,
                29.092054367065433
            ]
        },
        {
            "latlng": [
                40.98268428155264,
                29.084587097167972
            ]
        },
        {
            "latlng": [
                40.98819156349393,
                29.07420158386231
            ]
        },
        {
            "latlng": [
                40.99557707836369,
                29.11033630371094
            ]
        },
        {
            "latlng": [
                40.98274907577852,
                29.106817245483402
            ]
        },
        {
            "latlng": [
                40.975362124016016,
                29.10338401794434
            ]
        },
        {
            "latlng": [
                40.97672294044807,
                29.065618515014652
            ]
        },
        {
            "latlng": [
                40.96816877082855,
                29.0709400177002
            ]
        },
        {
            "latlng": [
                40.96810396228028,
                29.05815124511719
            ]
        },
        {
            "latlng": [
                40.97568613047461,
                29.083471298217777
            ]
        },
        {
            "latlng": [
                40.97004819103926,
                29.084243774414066
            ]
        },
        {
            "latlng": [
                40.964150520469424,
                29.091711044311523
            ]
        },
        {
            "latlng": [
                40.96343757952691,
                29.0819263458252
            ]
        }
    ],
    "branches": [
        {
            "nodes": [
                0,
                1
            ],
            "status": 1,
            "source": 0,
            "pf": 0.5
        },
        {
            "nodes": [
                1,
                2
            ],
            "status": 1,
            "source": 0,
            "pf": 0.1
        },
        {
            "nodes": [
                2,
                3
            ],
            "status": 1,
            "source": 0,
            "pf": 0.2
        },
        {
            "nodes": [
                1,
                4
            ],
            "status": 1,
            "source": 0,
            "pf": 0.3
        },
        {
            "nodes": [
                4,
                5
            ],
            "status": 1,
            "source": 1,
            "pf": 0.1
        },
        {
            "nodes": [
                1,
                6
            ],
            "status": 1,
            "source": 1,
            "pf": 0.7
        },
        {
            "nodes": [
                6,
                7
            ],
            "status": 1,
            "source": 1,
            "pf": 0.2
        },
        {
            "nodes": [
                7,
                8
            ],
            "status": 1,
            "source": 1,
            "pf": 0.1
        },
        {
            "nodes": [
                7,
                9
            ],
            "status": 1,
            "source": 1,
            "pf": 0.5
        },
        {
            "nodes": [
                4,
                10
            ],
            "status": 1,
            "pf": 0.4
        },
        {
            "nodes": [
                11,
                12
            ],
            "status": 0,
            "pf": 0.8
        },
        {
            "nodes": [
                17,
                10
            ],
            "status": -1,
            "pf": 0.5
        },
        {
            "nodes": [
                17,
                16
            ],
            "status": 0
        },
        {
            "nodes": [
                16,
                11
            ],
            "status": 1,
            "pf": 0.6
        },
        {
            "nodes": [
                11,
                13
            ],
            "status": 1,
            "pf": 0.1
        },
        {
            "nodes": [
                13,
                14
            ],
            "status": 0
        },
        {
            "nodes": [
                13,
                15
            ],
            "status": 0
        },
        {
            "nodes": [
                18,
                12
            ],
            "status": 0,
            "pf": 0.85
        },
        {
            "nodes": [
                19,
                16
            ],
            "status": 1,
            "pf": 0.01
        },
        {
            "nodes": [
                16,
                20
            ],
            "status": 1,
            "pf": 0.2
        },
        {
            "nodes": [
                22,
                21
            ],
            "status": 0
        },
        {
            "nodes": [
                21,
                5
            ],
            "status": 1,
            "pf": 0.6
        },
        {
            "nodes": [
                27,
                22
            ],
            "status": 0
        },
        {
            "nodes": [
                22,
                25
            ],
            "status": 0
        },
        {
            "nodes": [
                25,
                26
            ],
            "status": 0
        },
        {
            "nodes": [
                24,
                22
            ],
            "status": 0
        },
        {
            "nodes": [
                21,
                23
            ],
            "status": -1,
            "pf": 0.7
        }
    ],
    "externalBranches": [
        {
            "node": 2,
            "status": 1,
            "source": 0
        },
        {
            "node": 5,
            "status": 1,
            "source": 1
        },
        {
            "source": 2,
            "node": 20,
            "status": 1
        }
    ],
    "resources": [
        {
            "latlng": [
                41.0136,
                29.0206
            ],
            "type": null
        },
        {
            "latlng": [
                40.9713,
                29.042
            ],
            "type": "solar"
        },
        {
            "latlng": [
                40.96564119027965,
                29.10724639892578
            ],
            "type": null
        }
    ]
}

function loadJsonFromServer(filename) {
	Server.get(filename).then(response => {
		Graph.loadGraph(JSON.parse(response));
		Graph.render(Map);
	}).catch(error => {
		alert("Failed to get graph data from server:\n"+error);
	});
}

//loadJsonFromServer("sample.json");

Server.get("sample.json").then(response => {
	console.log("loaded sample.json from server");
	Graph.loadGraph(JSON.parse(response));
	Graph.render(Map);
}).catch(error => {
	console.error("Failed to get graph data from server:\n"+error);
	Graph.loadGraph(fallbackGraph);
	Graph.render(Map);
});
/*
Server.get("/getJsons").then(response => {
	console.log(response);
});
*/

